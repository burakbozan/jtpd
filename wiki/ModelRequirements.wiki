#summary One-sentence summary of this page.

= Introduction =

*Liquibase Kullanımı
*GenericPK ve GenericModel
*System Models


= Details =
==Liquibase==

Liquibase veritabanı değişikliklerini versiyonlamak için kullanılan bir araçtır. Maven, Command Line, Ant pluginleri sürekli veritabanı güncellemelerinin takibini kolaylaştırmaktadır.

Maven Modülleri içerisindeki *jtpd.model* modülü içerisindeki pom.xml içerisinde ilgili liquibase maven konfigurasyonu yapılmıştır.

jtpd.model/src/main/resources içerisindeki liquibase-changelog.xml içerisinde veritabanı değişikliklerini sql ve xml elementleri olarak tanımlanabilir.

Kullanımı hakkından bilgi için : [http://www.liquibase.org/manual/home]

örnek tanımlama :

{{{
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.7"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.7
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.7.xsd">
    <changeSet id="1" author="bob">
        <comment>A sample change log</comment>
        <createTable/>
    </changeSet>
    <changeSet id="2" author="bob" runAlways="true">
        <alterTable/>
    </changeSet>
    <changeSet id="1" author="alice" failOnError="false" dbms="oracle">
        <alterTable/>
    </changeSet>
</databaseChangeLog>
}}}

Maven üzerinden veritabanı güncellemesi için : 

*mvn liquibase:update*

komutu kullanılmalıdır.


Local makinada kullanımı için pom.xml'deki 

{{{
			<plugin>
				<groupId>org.liquibase</groupId>
				<artifactId>liquibase-plugin</artifactId>
				<version>1.9.3.0</version>
				<configuration>
					<changeLogFile>src/main/resources/liquibase-changelog.xml</changeLogFile>
					<driver>com.mysql.jdbc.Driver</driver>
					<url>jdbc:mysql://db.jtpd.com:3306/JTPD</url>
					<username>root</username>
					<password>****</password>
				</configuration>
				<executions>
					<execution>
						<phase>process-resources</phase>
						<goals>
							<goal>update</goal>
						</goals>
					</execution>
				</executions>
				<dependencies>
					<dependency>
						<groupId>mysql</groupId>
						<artifactId>mysql-connector-java</artifactId>
						<version>5.1.6</version>
					</dependency>
				</dependencies>
			</plugin>
}}}

tanımlamaların değiştirilmesi gerekmektedir.

==GenericPK==

Model sınıflarındaki id özelliğini tanımlar. Bir model id sınıfı basit olabiliceği gibi birden fazla özellikten oluşmuk complex id sınıfları da olabilir. Bu yüzden GenericID'den türeyen her alt sınıf kendisine ait constructor'a sahip olabilir.

Örnek:
{{{
public abstract class GenericPK {
}
}}}

{{{
public class IntegerIPK extends GenericPK(){
  @ID
  private Integer id;

  public IntegerId(Integer id){
     this.id = id;
  }

  public Integer getId(){
     return this.id;
  }
}
}}}

{{{
public class StudentClassRelationPK extends GenericPK{
   @ID
   private Integer studentId;

   @ID
   private Integer classId;

   public StudentClassRelationId(Integer studentId, Integer classId){
      this.studentId = studentId;
      this.classId = classId;
   }

   public Integer getStudentId(){
      return this.studentId;
   }

   public Integer getClassId(){
      return this.classId;
   }
}
}}}

==GenericModel<ID extends GenericPK>==

Logical Modelleri oluşturan tüm sınıflar bu yapıdan türemelidir. Örnek

{{{
public abstract class GenericModel<ID extends GenericPK> {

    private ID id;

    public GenericModel(){
       // DO NOTHING
    }    

    public GenericModel(ID id){
       this.id =  id;
    }

    public ID getId(){
       return this.id;
    }
}
}}}

{{{
public class Student extends GenericModel<IntegerPK> {
    
    @Column(name="FIRSTNAME")
    private String firstName;

    @Column(name="LASTNAME")    
    private String lastName;

    public String getFirstName(){
       return this.firstName;
    }

    public String getLastName(){
       return this.lastName;
    }

    public void setFirstName(String firstName){
       this.firstName = firstName;
    }

    public void setLastName(String lastName){
       this.lastName = lastName;
    }
}
}}}
{{{
public class StudentClassRelation extends GenericModel<StudentClassRelationPK> {
   private Date registerDate;
   
   public Date getRegisterDate(){
      return this.registerDate;
   }

   public void setRegisterDate(Date registerDate){
      this.registerDate = registerDate;
   } 
}
}}}


Add your content here.  Format your content with:
  * Text in *bold* or _italic_
  * Headings, paragraphs, and lists
  * Automatic links to other wiki pages