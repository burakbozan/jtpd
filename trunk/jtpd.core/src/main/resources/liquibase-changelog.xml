<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.8"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.8
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.8.xsd">
    <changeSet author="tdiler" id="jtpd-1">
    	<comment>for test</comment>
    	<sql>
			CREATE TABLE `JTPD`.`STUDENT` (
			  `ID` INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
			  `FIRSTNAME` VARCHAR(45) NOT NULL,
			  `LASTNAME` VARCHAR(45) NOT NULL,
			  `AGE` INT,
			  PRIMARY KEY (`ID`)
			)
    	</sql>
    </changeSet>
    <changeSet author="tdiler" id="jtpd-2">
    	<comment>for test</comment>
    	<sql>
			CREATE TABLE `JTPD`.`TEACHER` (
			  `ID` INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
			  `FIRSTNAME` VARCHAR(45) NOT NULL,
			  `LASTNAME` VARCHAR(45) NOT NULL,
			  PRIMARY KEY (`ID`)
			)
    	</sql>
    </changeSet>
	<changeSet author="tdiler" id="jtpd-3">
		<comment>for jtpd-1 issue</comment>
		<sql>CREATE TABLE IF NOT EXISTS `JTPD`.`USER` (
			`ID` INT NOT NULL AUTO_INCREMENT ,
			`USERNAME` VARCHAR(45) NOT NULL ,
			`PASSWORD` VARCHAR(45) NOT NULL ,
			`FIRSTNAME` VARCHAR(45) NOT NULL ,
			`LASTNAME` VARCHAR(45) NOT NULL ,
			`EMAIL` VARCHAR(45) NOT NULL ,
			`PHONE` VARCHAR(45) NULL ,
			PRIMARY KEY (`ID`) ,
			UNIQUE INDEX `UNI_USERNAME` (`USERNAME` ASC) )
			ENGINE = InnoDB</sql>
	</changeSet>
	<changeSet author="tdiler" id="jtpd-4">
		<comment>for jtpd-1 issue</comment>
		<sql>CREATE TABLE IF NOT EXISTS `JTPD`.`USER_INFO` (
			`ID` INT NOT NULL ,
			`CREATEDTIME` DATETIME NOT NULL ,
			`APPROVALMESSAGE` VARCHAR(255) NULL ,
			`APPROVEDTIME` DATETIME NULL ,
			`APPROVEDBY` INT NULL ,
			PRIMARY KEY (`ID`) ,
			INDEX `FK_APPROVEDBY` (`APPROVEDBY` ASC) ,
			INDEX `FK_ID` (`ID` ASC) ,
			CONSTRAINT `FK_APPROVEDBY`
			FOREIGN KEY (`APPROVEDBY` )
			REFERENCES `JTPD`.`USER` (`ID` )
			ON DELETE NO ACTION
			ON UPDATE NO ACTION,
			CONSTRAINT `FK_ID`
			FOREIGN KEY (`ID` )
			REFERENCES `JTPD`.`USER` (`ID` )
			ON DELETE NO ACTION
			ON UPDATE NO ACTION)
			ENGINE = InnoDB</sql>
	</changeSet>

	<changeSet author="tdiler" id="jtpd-5">
		<comment>for jtpd-1 issue</comment>
		<sql>CREATE TABLE IF NOT EXISTS `JTPD`.`STORY` (
			`ID` INT NOT NULL ,
			`AUTHOR_ID` INT NOT NULL ,
			`TITLE` VARCHAR(150) NOT NULL ,
			`BODY` MEDIUMTEXT NOT NULL ,
			`TYPE` ENUM('ARTICLE', 'PRESENTATION', 'NEWS','ADVERTISE','ANNOUNCEMENT')
			NOT NULL ,
			`CREATEDTIME` DATETIME NOT NULL ,
			`STATUS` ENUM('ONWAITING','ONCHECKING','APPROVED','REJECTED') NOT
			NULL DEFAULT 'ONWAITING' ,
			`LOOKEDBY` INT NULL ,
			PRIMARY KEY (`ID`) ,
			INDEX `FK_LOOKEDBY` (`LOOKEDBY` ASC) ,
			INDEX `FK_AUTHOR` (`AUTHOR_ID` ASC) ,
			CONSTRAINT `FK_LOOKEDBY`
			FOREIGN KEY (`LOOKEDBY` )
			REFERENCES `JTPD`.`USER` (`ID` )
			ON DELETE NO ACTION
			ON UPDATE NO ACTION,
			CONSTRAINT `FK_AUTHOR`
			FOREIGN KEY (`AUTHOR_ID` )
			REFERENCES `JTPD`.`USER` (`ID` )
			ON DELETE NO ACTION
			ON UPDATE NO ACTION)
			ENGINE = InnoDB</sql>
	</changeSet>

</databaseChangeLog>
